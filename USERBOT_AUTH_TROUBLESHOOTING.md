# üîß Userbot Auth Troubleshooting

## –í–∏–ø—Ä–∞–≤–ª–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

‚úÖ **PHONE_CODE_INVALID** - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º `Api.auth.SignIn`  
‚úÖ **Session –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è** - —Ç–µ–ø–µ—Ä `sessionString` –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –º—ñ–∂ `send_code` —Ç–∞ `sign_in`

## –Ø–∫ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

1. **send_code** ‚Üí —Å—Ç–≤–æ—Ä—é—î Telegram —Å–µ—Å—ñ—é, –æ—Ç—Ä–∏–º—É—î `phoneCodeHash` —ñ `sessionString`
2. Frontend –∑–±–µ—Ä—ñ–≥–∞—î –æ–±–∏–¥–≤–∞ –∑–Ω–∞—á–µ–Ω–Ω—è
3. **sign_in** ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç—É —Å–∞–º—É `sessionString` –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó `phoneCodeHash`

## –Ø–∫—â–æ –≤—Å–µ —â–µ `PHONE_CODE_EXPIRED`

### –ü—Ä–∏—á–∏–Ω–∏:
1. ‚è±Ô∏è **–ö–æ–¥ –∑–∞—Å—Ç–∞—Ä—ñ–≤** - Telegram –∫–æ–¥–∏ –¥—ñ–π—Å–Ω—ñ ~2-3 —Ö–≤–∏–ª–∏–Ω–∏
2. üîÑ **–ù–µ –æ–Ω–æ–≤–∏–≤—Å—è Vercel API** - —á–µ–∫–∞–π—Ç–µ auto-deploy (~2-5 —Ö–≤ –ø—ñ—Å–ª—è push)
3. üî¥ **Edge Function –Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–∞** - GitHub Actions –¥–µ–ø–ª–æ—ó—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –æ–Ω–æ–≤–∏–≤—Å—è Vercel
node scripts/tmp_rovodev_check_vercel.js

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Edge Function –ª–æ–≥–∏
# Supabase Dashboard ‚Üí Edge Functions ‚Üí authorize-userbot ‚Üí Logs
```

## –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

1. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–í—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∫–æ–¥"**
2. –û—Ç—Ä–∏–º–∞–π—Ç–µ –∫–æ–¥ –≤ Telegram (–ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞ ~5-10 —Å–µ–∫)
3. **–®–≤–∏–¥–∫–æ** –≤–≤–µ–¥—ñ—Ç—å –∫–æ–¥ (–Ω–µ —á–µ–∫–∞–π—Ç–µ >2 —Ö–≤)
4. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å

## –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏

| –ü–æ–º–∏–ª–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†—ñ—à–µ–Ω–Ω—è |
|---------|---------|---------|
| `PHONE_CODE_INVALID` | –°—Ç–∞—Ä–∏–π API –±–µ–∑ `phoneCodeHash` | –û–Ω–æ–≤–ª–µ–Ω–æ –≤ commit `aa7a892` |
| `PHONE_CODE_EXPIRED` | –ö–æ–¥ –∑–∞—Å—Ç–∞—Ä—ñ–≤ –∞–±–æ —Å—Ç–∞—Ä–∏–π API | –ß–µ–∫–∞—Ç–∏ deploy –∞–±–æ —à–≤–∏–¥—à–µ –≤–≤–æ–¥–∏—Ç–∏ |
| `API_ID_INVALID` | –ù–µ–≤—ñ—Ä–Ω—ñ API credentials | –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ API ID —ñ Hash |
| `Spy not found` | –ù–µ–≤—ñ—Ä–Ω–∏–π `spyId` | –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ ID —à–ø–∏–≥—É–Ω–∞ –≤ –ë–î |

## Debug –ª–æ–≥–∏

–î–æ–¥–∞–Ω–æ –≤ commits:
- `bbe696a` - –ª–æ–≥–∏ –≤ Edge Function —ñ Vercel API
- –î–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ –≤ Supabase Dashboard –ø—ñ—Å–ª—è —Å–ø—Ä–æ–±–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

## –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –¥–æ–ø–æ–º–∞–≥–∞—î

–ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç–∏ Edge Function –±–µ–∑ Vercel, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–≤—à–∏ GramJS –Ω–∞–ø—Ä—è–º—É –≤ Deno (—Å–∫–ª–∞–¥–Ω—ñ—à–µ).
